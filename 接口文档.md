# 电商系统接口文档

## 基础说明

- 基础URL: `http://localhost:8080`
- 所有需要身份验证的接口都应在请求头中携带 `token`
- 接口返回格式统一为：

```json
{
  "success": true,  // 是否成功
  "code": 200,      // 状态码
  "message": "成功", // 提示信息
  "data": {}        // 数据
}
```

- 常见状态码：
  - 200: 成功
  - 400: 参数错误
  - 401: 未授权
  - 403: 禁止访问
  - 404: 资源不存在
  - 500: 服务器错误

## 一、用户相关接口

### 1.1 用户注册

- URL: `/user/register`
- 方法: `POST`
- 请求体:

```json
{
  "username": "用户名",
  "password": "密码",
  "gender": "性别"
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "username": "用户名",
    "gender": "性别",
    "role": 0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 1.2 用户登录

- URL: `/user/login`
- 方法: `POST`
- 请求体:

```json
{
  "username": "用户名",
  "password": "密码"
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "userId": "1",
    "username": "用户名",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

### 1.3 检查用户名是否可用

- URL: `/user/check-username`
- 方法: `GET`
- 参数:
  - `username`: 用户名
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true  // true表示可用，false表示已存在
}
```

### 1.4 获取用户信息

- URL: `/user/info`
- 方法: `GET`
- 需要验证: 是
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "username": "用户名",
    "gender": "性别",
    "role": 0,
    "phone": "13800138000",
    "email": "user@example.com",
    "avatar": "http://localhost:8080/img/avatars/default.jpg",
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 1.5 更新用户信息

- URL: `/user/update-info`
- 方法: `PUT`
- 需要验证: 是
- 请求体:

```json
{
  "username": "新用户名",
  "gender": "性别",
  "phone": "13800138000",
  "email": "user@example.com"
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "username": "新用户名",
    "gender": "性别",
    "role": 0,
    "phone": "13800138000",
    "email": "user@example.com",
    "avatar": "http://localhost:8080/img/avatars/default.jpg",
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 1.6 上传用户头像

- URL: `/user/upload-avatar`
- 方法: `POST`
- 需要验证: 是
- 请求体: 
  - `file`: 头像图片文件 (form-data)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": "http://localhost:8080/img/avatars/1a2b3c4d5e6f.jpg"  // 头像URL
}
```

## 二、商品评价相关接口

### 2.1 添加商品评价

- URL: `/api/reviews`
- 方法: `POST`
- 需要验证: 是
- 请求体:

```json
{
  "goodsId": 1,
  "orderId": 1,
  "rating": 5,
  "content": "商品很好，质量不错！",
  "images": "/img/review/1.jpg,/img/review/2.jpg"
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "userId": 1,
    "goodsId": 1,
    "orderId": 1,
    "rating": 5,
    "content": "商品很好，质量不错！",
    "images": "/img/review/1.jpg,/img/review/2.jpg",
    "likeCount": 0,
    "createTime": "2023-06-01T12:00:00",
    "username": "用户名",
    "goodsName": "商品名称"
  }
}
```

### 2.2 获取商品评价列表

- URL: `/api/reviews/goods/{goodsId}`
- 方法: `GET`
- 参数:
  - `goodsId`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "userId": 1,
      "goodsId": 1,
      "orderId": 1,
      "rating": 5,
      "content": "商品很好，质量不错！",
      "images": "/img/review/1.jpg,/img/review/2.jpg",
      "likeCount": 0,
      "createTime": "2023-06-01T12:00:00",
      "username": "用户名",
      "goodsName": "商品名称"
    }
  ]
}
```

### 2.3 获取用户评价列表

- URL: `/api/reviews/user`
- 方法: `GET`
- 需要验证: 是
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "userId": 1,
      "goodsId": 1,
      "orderId": 1,
      "rating": 5,
      "content": "商品很好，质量不错！",
      "images": "/img/review/1.jpg,/img/review/2.jpg",
      "likeCount": 0,
      "createTime": "2023-06-01T12:00:00",
      "username": "用户名",
      "goodsName": "商品名称"
    }
  ]
}
```

### 2.4 获取订单评价列表

- URL: `/api/reviews/order/{orderId}`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `orderId`: 订单ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "userId": 1,
      "goodsId": 1,
      "orderId": 1,
      "rating": 5,
      "content": "商品很好，质量不错！",
      "images": "/img/review/1.jpg,/img/review/2.jpg",
      "likeCount": 0,
      "createTime": "2023-06-01T12:00:00",
      "username": "用户名",
      "goodsName": "商品名称"
    }
  ]
}
```

### 2.5 检查是否已评价

- URL: `/api/reviews/check`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `goodsId`: 商品ID
  - `orderId`: 订单ID
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true  // true表示已评价，false表示未评价
}
```

### 2.6 点赞评价

- URL: `/api/reviews/{reviewId}/like`
- 方法: `POST`
- 需要验证: 是
- 参数:
  - `reviewId`: 评价ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 2.7 取消点赞评价

- URL: `/api/reviews/{reviewId}/like`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `reviewId`: 评价ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 2.8 检查是否已点赞

- URL: `/api/reviews/{reviewId}/like/check`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `reviewId`: 评价ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true  // true表示已点赞，false表示未点赞
}
```

### 2.9 获取商品平均评分

- URL: `/api/reviews/goods/{goodsId}/rating`
- 方法: `GET`
- 参数:
  - `goodsId`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": 4.5  // 平均评分
}
```

### 2.10 获取商品评价数量

- URL: `/api/reviews/goods/{goodsId}/count`
- 方法: `GET`
- 参数:
  - `goodsId`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": 10  // 评价数量
}
```

### 2.11 上传评价图片

- URL: `/api/reviews/upload/image`
- 方法: `POST`
- 需要验证: 是
- 请求体:
  - `file`: 图片文件 (form-data)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": "/img/review/1a2b3c4d5e6f.jpg"  // 图片URL
}
```

### 2.12 删除评价

- URL: `/api/reviews/{id}`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `id`: 评价ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

## 三、分类相关接口

### 3.1 获取分类列表

- URL: `/category/list`
- 方法: `GET`
- 参数:
  - `parentId`: 父分类ID (可选，不传则获取所有一级分类)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "name": "分类名称",
      "parentId": 0,
      "level": 1,
      "sort": 0,
      "createTime": "2023-06-01T12:00:00",
      "updateTime": "2023-06-01T12:00:00"
    }
  ]
}
```

### 3.2 获取分类详情

- URL: `/category/{id}`
- 方法: `GET`
- 参数:
  - `id`: 分类ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "name": "分类名称",
    "parentId": 0,
    "level": 1,
    "sort": 0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

## 四、购物车相关接口

### 4.1 获取购物车列表

- URL: `/cart/list`
- 方法: `GET`
- 需要验证: 是
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "userId": 1,
      "goodsId": 1,
      "goodsName": "商品名称",
      "goodsImage": "图片路径",
      "price": 100.00,
      "quantity": 1,
      "createTime": "2023-06-01T12:00:00",
      "updateTime": "2023-06-01T12:00:00"
    }
  ]
}
```

### 4.2 添加商品到购物车

- URL: `/cart/add`
- 方法: `POST`
- 需要验证: 是
- 参数:
  - `goodsId`: 商品ID
  - `quantity`: 数量
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 4.3 更新购物车商品数量

- URL: `/cart/update`
- 方法: `PUT`
- 需要验证: 是
- 参数:
  - `cartId`: 购物车ID
  - `quantity`: 新数量
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 4.4 删除购物车商品

- URL: `/cart/delete/{cartId}`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `cartId`: 购物车ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 4.5 删除购物车中的商品（按商品ID）

- URL: `/cart/delete/goods/{goodsId}`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `goodsId`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 4.6 清空购物车

- URL: `/cart/clear`
- 方法: `DELETE`
- 需要验证: 是
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

## 五、用户地址相关接口

### 5.1 获取收货地址列表

- URL: `/api/addresses`
- 方法: `GET`
- 需要验证: 是
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "userId": 1,
      "name": "收货人姓名",
      "phone": "手机号码",
      "province": "省份",
      "city": "城市",
      "district": "区/县",
      "address": "详细地址",
      "isDefault": 1,
      "createTime": "2023-06-01T12:00:00",
      "updateTime": "2023-06-01T12:00:00"
    }
  ]
}
```

### 5.2 添加收货地址

- URL: `/api/addresses`
- 方法: `POST`
- 需要验证: 是
- 请求体:

```json
{
  "name": "收货人姓名",
  "phone": "手机号码",
  "province": "省份",
  "city": "城市",
  "district": "区/县",
  "address": "详细地址",
  "isDefault": 0
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "userId": 1,
    "name": "收货人姓名",
    "phone": "手机号码",
    "province": "省份",
    "city": "城市",
    "district": "区/县",
    "address": "详细地址",
    "isDefault": 0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 5.3 获取收货地址详情

- URL: `/api/addresses/{id}`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `id`: 地址ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "userId": 1,
    "name": "收货人姓名",
    "phone": "手机号码",
    "province": "省份",
    "city": "城市",
    "district": "区/县",
    "address": "详细地址",
    "isDefault": 0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 5.4 更新收货地址

- URL: `/api/addresses/{id}`
- 方法: `PUT`
- 需要验证: 是
- 参数:
  - `id`: 地址ID (路径参数)
- 请求体:

```json
{
  "name": "收货人姓名",
  "phone": "手机号码",
  "province": "省份",
  "city": "城市",
  "district": "区/县",
  "address": "详细地址",
  "isDefault": 0
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "userId": 1,
    "name": "收货人姓名",
    "phone": "手机号码",
    "province": "省份",
    "city": "城市",
    "district": "区/县",
    "address": "详细地址",
    "isDefault": 0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 5.5 删除收货地址

- URL: `/api/addresses/{id}`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `id`: 地址ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

### 5.6 设为默认地址

- URL: `/api/addresses/{id}/default`
- 方法: `POST`
- 需要验证: 是
- 参数:
  - `id`: 地址ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

## 六、订单相关接口

### 6.1 创建订单

- URL: `/api/orders`
- 方法: `POST`
- 需要验证: 是
- 请求体:

```json
{
  "addressId": 1,
  "cartItemIds": [1, 2, 3]
}
```
或者直接购买模式：
```json
{
  "addressId": 1,
  "goodsId": 1,
  "quantity": 1
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "orderNo": "订单编号",
    "userId": 1,
    "totalAmount": 300.00,
    "payStatus": 0,
    "payType": null,
    "payTime": null,
    "status": 0,
    "consignee": "收货人",
    "mobile": "手机号",
    "address": "收货地址",
    "message": "留言",
    "orderItems": [
      {
        "id": 1,
        "orderId": 1,
        "goodsId": 1,
        "goodsName": "商品名称",
        "goodsImage": "图片路径",
        "price": 100.00,
        "quantity": 1,
        "totalPrice": 100.00
      }
    ],
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 6.2 获取订单详情

- URL: `/api/orders/{id}`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `id`: 订单ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "orderNo": "订单编号",
    "userId": 1,
    "totalAmount": 300.00,
    "payStatus": 0,
    "payType": null,
    "payTime": null,
    "status": 0,
    "name": "收货人姓名",
    "phone": "手机号码",
    "address": "完整收货地址",
    "message": "留言",
    "orderItems": [
      {
        "id": 1,
        "orderId": 1,
        "goodsId": 1,
        "goodsName": "商品名称",
        "goodsImage": "图片路径",
        "price": 100.00,
        "quantity": 1,
        "totalPrice": 100.00
      }
    ],
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 6.3 根据订单编号获取订单详情

- URL: `/api/orders/no`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `orderNo`: 订单编号
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "orderNo": "订单编号",
    "userId": 1,
    "totalAmount": 300.00,
    "payStatus": 0,
    "payType": null,
    "payTime": null,
    "status": 0,
    "consignee": "收货人",
    "mobile": "手机号",
    "address": "收货地址",
    "message": "留言",
    "orderItems": [
      {
        "id": 1,
        "orderId": 1,
        "goodsId": 1,
        "goodsName": "商品名称",
        "goodsImage": "图片路径",
        "price": 100.00,
        "quantity": 1,
        "totalPrice": 100.00
      }
    ],
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 6.4 获取订单列表

- URL: `/api/orders`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `pageNum`: 页码 (默认1)
  - `pageSize`: 每页数量 (默认10)
  - `status`: 订单状态 (可选): 0-待付款 1-已付款 2-已发货 3-已完成 4-已取消
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "total": 100,
    "pages": 10,
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "id": 1,
        "orderNo": "订单编号",
        "userId": 1,
        "totalAmount": 300.00,
        "payStatus": 0,
        "payType": null,
        "payTime": null,
        "status": 0,
        "consignee": "收货人",
        "mobile": "手机号",
        "address": "收货地址",
        "message": "留言",
        "orderItems": [
          {
            "id": 1,
            "orderId": 1,
            "goodsId": 1,
            "goodsName": "商品名称",
            "goodsImage": "图片路径",
            "price": 100.00,
            "quantity": 1,
            "totalPrice": 100.00
          }
        ],
        "createTime": "2023-06-01T12:00:00",
        "updateTime": "2023-06-01T12:00:00"
      }
    ]
  }
}
```

### 6.5 取消订单

- URL: `/api/orders/{id}/cancel`
- 方法: `POST`
- 需要验证: 是
- 参数:
  - `id`: 订单ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

### 6.6 支付订单

- URL: `/api/orders/{id}/pay`
- 方法: `POST`
- 需要验证: 是
- 参数:
  - `id`: 订单ID (路径参数)
  - `paymentType`: 支付方式 (1支付宝，2微信，3银行卡)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

### 6.7 确认收货

- URL: `/api/orders/{id}/receipt`
- 方法: `POST`
- 需要验证: 是
- 参数:
  - `id`: 订单ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

### 6.8 删除订单

- URL: `/api/orders/{id}`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `id`: 订单ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

## 七、管理员接口

### 7.1 订单管理

#### 7.1.1 获取所有订单列表 (管理员)

- URL: `/api/admin/orders`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 参数:
  - `pageNum`: 页码 (默认1)
  - `pageSize`: 每页数量 (默认10)
  - `status`: 订单状态 (可选): 0-待付款 1-已付款 2-已发货 3-已完成 4-已取消
  - `orderNo`: 订单号关键词 (可选)
  - `userId`: 用户ID (可选)
- 响应: 与普通订单列表响应格式相同

#### 7.1.2 获取订单详情 (管理员)

- URL: `/api/admin/orders/{id}`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 订单ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "orderNo": "订单编号",
    "userId": 1,
    "totalAmount": 300.00,
    "payStatus": 0,
    "payType": null,
    "payTime": null,
    "status": 0,
    "consignee": "收货人",
    "mobile": "手机号",
    "address": "收货地址",
    "message": "留言",
    "orderItems": [
      {
        "id": 1,
        "orderId": 1,
        "goodsId": 1,
        "goodsName": "商品名称",
        "goodsImage": "图片路径",
        "price": 100.00,
        "quantity": 1,
        "totalPrice": 100.00
      }
    ],
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

#### 7.1.3 订单发货 (管理员)

- URL: `/api/admin/orders/{id}/ship`
- 方法: `POST`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 订单ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

#### 7.1.4 删除订单 (管理员)

- URL: `/api/admin/orders/{id}`
- 方法: `DELETE`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 用户ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

#### 7.1.5 获取订单统计数据 (管理员)

- URL: `/api/admin/orders/statistics`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "totalOrders": 3,
    "totalSales": 70051.9
  }
}
```

### 7.2 用户管理

#### 7.2.1 获取所有用户列表 (管理员)

- URL: `/api/admin/users`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 参数:
  - `pageNum`: 页码 (默认1)
  - `pageSize`: 每页数量 (默认10)
  - `username`: 用户名关键词 (可选)
  - `phone`: 手机号关键词 (可选)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "total": 100,
    "pages": 10,
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "id": 1,
        "username": "用户名",
        "gender": "性别",
        "role": 0,
        "createTime": "2023-06-01T12:00:00",
        "updateTime": "2023-06-01T12:00:00"
      }
    ]
  }
}
```

#### 7.2.2 删除用户 (管理员)

- URL: `/api/admin/users/{id}`
- 方法: `DELETE`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 用户ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true
}
```

#### 7.2.3 获取用户总数 (管理员)

- URL: `/api/admin/users/count`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": 100  // 用户总数
}
```

### 7.3 商品分类管理

#### 7.3.1 获取分类列表 (管理员)

- URL: `/api/admin/categories`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "name": "分类名称",
      "parentId": 0,
      "level": 1,
      "sort": 0,
      "createTime": "2023-06-01T12:00:00",
      "updateTime": "2023-06-01T12:00:00"
    }
  ]
}
```

#### 7.3.2 添加分类 (管理员)

- URL: `/api/admin/categories`
- 方法: `POST`
- 需要验证: 是 (管理员)
- 请求体:

```json
{
  "name": "分类名称",
  "parentId": 0,
  "level": 1,
  "sort": 0
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "name": "分类名称",
    "parentId": 0,
    "level": 1,
    "sort": 0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

#### 7.3.3 获取分类详情 (管理员)

- URL: `/api/admin/categories/{id}`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 分类ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "name": "分类名称",
    "parentId": 0,
    "level": 1,
    "sort": 0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

#### 7.3.4 更新分类 (管理员)

- URL: `/api/admin/categories/{id}`
- 方法: `PUT`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 分类ID (路径参数)
- 请求体:

```json
{
  "name": "分类名称",
  "parentId": 0,
  "level": 1,
  "sort": 0
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

#### 7.3.5 删除分类 (管理员)

- URL: `/api/admin/categories/{id}`
- 方法: `DELETE`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 分类ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 7.4 商品管理

#### 7.4.1 获取商品列表 (管理员)

- URL: `/api/admin/goods`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 参数:
  - `pageNum`: 页码 (默认1)
  - `pageSize`: 每页数量 (默认10)
  - `categoryId`: 分类ID (可选)
  - `keyword`: 搜索关键词 (可选)
  - `sortBy`: 排序字段 (可选, 可选值: price, rating, salesVolume, newest)
  - `sortDirection`: 排序方向 (可选, 默认: desc, 可选值: asc, desc)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "total": 100,
    "pages": 10,
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "id": 1,
        "name": "商品名称",
        "description": "商品描述",
        "price": 100.00,
        "stock": 100,
        "status": 1,
        "categoryId": 1,
        "imageUrl": "图片路径",
        "salesVolume": 0,
        "rating": 5.0,
        "createTime": "2023-06-01T12:00:00",
        "updateTime": "2023-06-01T12:00:00"
      }
    ]
  }
}
```

#### 7.4.2 添加商品 (管理员)

- URL: `/api/admin/goods`
- 方法: `POST`
- 需要验证: 是 (管理员)
- 请求体:

```json
{
  "name": "商品名称",
  "description": "商品描述",
  "price": 100.00,
  "stock": 100,
  "categoryId": 1,
  "imageUrl": "图片路径"
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "name": "商品名称",
    "description": "商品描述",
    "price": 100.00,
    "stock": 100,
    "status": 1,
    "categoryId": 1,
    "imageUrl": "图片路径",
    "salesVolume": 0,
    "rating": 5.0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

#### 7.4.3 获取商品详情 (管理员)

- URL: `/api/admin/goods/{id}`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "name": "商品名称",
    "description": "商品描述",
    "price": 100.00,
    "stock": 100,
    "status": 1,
    "categoryId": 1,
    "imageUrl": "图片路径",
    "salesVolume": 0,
    "rating": 5.0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

#### 7.4.4 更新商品 (管理员)

- URL: `/api/admin/goods/{id}`
- 方法: `PUT`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 商品ID (路径参数)
- 请求体:

```json
{
  "name": "商品名称",
  "description": "商品描述",
  "price": 100.00,
  "stock": 100,
  "categoryId": 1,
  "imageUrl": "图片路径"
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

#### 7.4.5 删除商品 (管理员)

- URL: `/api/admin/goods/{id}`
- 方法: `DELETE`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

#### 7.4.6 上架/下架商品 (管理员)

- URL: `/api/admin/goods/{id}/status`
- 方法: `PUT`
- 需要验证: 是 (管理员)
- 参数:
  - `id`: 商品ID (路径参数)
  - `status`: 商品状态 (0下架，1上架)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

#### 7.4.7 获取商品总数 (管理员)

- URL: `/api/admin/goods/count`
- 方法: `GET`
- 需要验证: 是 (管理员)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": 100
}
```

#### 7.4.8 上传商品图片 (管理员)

- URL: `/api/admin/goods/upload/image`
- 方法: `POST`
- 需要验证: 是 (管理员)
- 请求体: 
  - `file`: 图片文件 (form-data)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": "图片URL"
}
```

## 八、状态码说明

| 状态码 | 说明 |
| --- | --- |
| 200 | 成功 |
| 400 | 参数错误 |
| 401 | 未授权 |
| 403 | 禁止访问 |
| 404 | 资源不存在 |
| 500 | 服务器错误 |
| 1001 | 参数无效 |
| 1002 | 参数为空 |
| 1003 | 用户名已存在 |

## 九、订单状态说明

| 状态码 | 说明 |
| --- | --- |
| 0 | 待付款 |
| 1 | 已付款 |
| 2 | 已发货 |
| 3 | 已完成 |
| 4 | 已取消 |

## 十、用户收藏接口

### 10.1 添加收藏

- URL: `/api/favorites`
- 方法: `POST`
- 需要验证: 是
- 请求体:

```json
{
  "goodsId": 1
}
```

- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "userId": 1,
    "goodsId": 1,
    "createTime": "2023-06-01T12:00:00",
    "goodsName": "商品名称",
    "goodsPrice": 100.00,
    "goodsImage": "图片路径"
  }
}
```

### 10.2 获取用户收藏列表

- URL: `/api/favorites`
- 方法: `GET`
- 需要验证: 是
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "userId": 1,
      "goodsId": 1,
      "createTime": "2023-06-01T12:00:00",
      "goodsName": "商品名称",
      "goodsPrice": 100.00,
      "goodsImage": "图片路径"
    }
  ]
}
```

### 10.3 检查商品是否已收藏

- URL: `/api/favorites/check`
- 方法: `GET`
- 需要验证: 是
- 参数:
  - `goodsId`: 商品ID
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": true  // true表示已收藏，false表示未收藏
}
```

### 10.4 删除收藏

- URL: `/api/favorites/{id}`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `id`: 收藏ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```

### 10.5 根据商品ID删除收藏

- URL: `/api/favorites/goods/{goodsId}`
- 方法: `DELETE`
- 需要验证: 是
- 参数:
  - `goodsId`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": null
}
```
## 十一、商品相关接口

### 11.1 获取商品列表

- URL: `/goods/list`
- 方法: `GET`
- 参数:
  - `pageNum`: 页码 (默认1)
  - `pageSize`: 每页数量 (默认10)
  - `categoryId`: 分类ID (可选)
  - `keyword`: 搜索关键词 (可选)
  - `sortBy`: 排序字段 (可选, 可选值: price,rating,sales,newest)
  - `sortDirection`: 排序方向 (可选, 默认: desc, 可选值: asc,desc)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "total": 100,
    "pages": 10,
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "id": 1,
        "name": "商品名称",
        "description": "商品描述",
        "price": 100.00,
        "stock": 100,
        "status": 1,
        "categoryId": 1,
        "imageUrl": "图片路径",
        "salesVolume": 0,
        "rating": 5.0,
        "createTime": "2023-06-01T12:00:00",
        "updateTime": "2023-06-01T12:00:00"
      }
    ]
  }
}
```

### 11.2 获取商品详情

- URL: `/goods/{id}`
- 方法: `GET`
- 参数:
  - `id`: 商品ID (路径参数)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "id": 1,
    "name": "商品名称",
    "description": "商品描述",
    "price": 100.00,
    "stock": 100,
    "status": 1,
    "categoryId": 1,
    "imageUrl": "图片路径",
    "salesVolume": 0,
    "rating": 5.0,
    "createTime": "2023-06-01T12:00:00",
    "updateTime": "2023-06-01T12:00:00"
  }
}
```

### 11.3 获取推荐商品

- URL: `/goods/recommend`
- 方法: `GET`
- 参数:
  - `limit`: 限制数量 (可选)
- 响应:

```json
{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": 1,
      "name": "商品名称",
      "description": "商品描述",
      "price": 100.00,
      "stock": 100,
      "status": 1,
      "categoryId": 1,
      "imageUrl": "图片路径",
      "salesVolume": 0,
      "rating": 5.0,
      "createTime": "2023-06-01T12:00:00",
      "updateTime": "2023-06-01T12:00:00"
    }
  ]
}
```

